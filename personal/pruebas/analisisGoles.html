<!DOCTYPE html>
<html lang="en">
<head>
    <title>Ejemplo de uso de dc.js Visualizacion de informacion 2016</title>
    <meta charset="UTF-8">
    <link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/kevinkraus92/cc5ac08b30c244e54e2c96bbe5fea110/raw/608ea6bc5564c9705a6b3c41281b5dddc84b8879/dc.css
"/>

</head>
<body>


    <div id="chart-ring-condicion"></div>
    <div id="chart-row-year"></div>
    <div id="chart-hist-month"></div>

    <script type="text/javascript" src="https://d3js.org/d3.v3.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/crossfilter/1.3.12/crossfilter.js"></script>
    <script type="text/javascript" src="https://cdn.rawgit.com/kevinkraus92/ccfc1f0fc79f8c4f21fb93fd836b3bb8/raw/25d3bf7c727efef76ffbf1d319ab3d40be070932/dc.js"></script>
    <script type="text/javascript">

    var condicionRingChart = dc.pieChart("#chart-ring-condicion"),
        monthHistChart = dc.barChart("#chart-hist-month")
        yearRowChart   = dc.rowChart("#chart-row-year");

    var goalData = [
        {Condicion: 'Local', Month: 'Marzo', Year: 2016, Count: 0, Div: 'Primera'},
        {Condicion: 'Visitante', Month: 'Marzo', Year: 2016, Count: 1, Div: 'Primera'},
        {Condicion: 'Visitante', Month: 'Abril', Year: 2016, Count: 1, Div: 'Primera'},
        {Condicion: 'Visitante', Month: 'Abril', Year: 2015, Count: 1, Div: 'Intermedia'},
        {Condicion: 'Local', Month: 'Abril', Year: 2015, Count: 1, Div: 'Intermedia'}
    ];

    var ndx = crossfilter(goalData),
            condicionDim = ndx.dimension(function(d) {return d.Condicion;}),
            GoalPerCondicion = condicionDim.group().reduceSum(function(d) {return +d.Count;}),

            monthDim  = ndx.dimension(function(d) {return d.Month;}),
            GoalPerMonth    = monthDim.group().reduceSum(function(d) {return +d.Count;}),

            yearDim  = ndx.dimension(function(d) {return +d.Year;}), 
            GoalPerYear = yearDim.group().reduceSum(function(d) {return +d.Count;})
        ;

    condicionRingChart
        .width(200).height(200)
        .dimension(condicionDim)
        .ordinalColors(['#FF4D4D','#1E90FF'])
        .group(GoalPerCondicion);

    monthHistChart
        .width(400).height(400)
        .dimension(monthDim)
        .group(GoalPerMonth)
        .x(d3.scale.ordinal())
        .xUnits(dc.units.ordinal)
        .ordinalColors(d3.scale.category20().range())
        .elasticX(true)
        .elasticY(true);

    yearRowChart
        .width(350).height(200)
        .dimension(yearDim)
        .group(GoalPerYear)
        .ordinalColors(d3.scale.category20c().range())
        .elasticX(true);

    dc.renderAll();

</script>
</body>
</html>