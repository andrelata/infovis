<!DOCTYPE html>
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Question</title>
</head>
<body>
  
  <div id="data"></div>

  <svg>
    
    <g>

      <text font-family="calibri" x="10" y="15">Agree</text>
      
      <rect x="80" y="0" height="20" width="25"
            style="stroke: #006600; fill: #006600"/>
      
    </g>
    <g>
      <text font-family="calibri" x="10" y="40">Neutral</text>
      <rect x="80" y="25" height="20" width="25"
            style="stroke: #C0C0C0; fill: #C0C0C0"/>
    </g>
    <g>
      <text font-family="calibri" x="10" y="65">Disagree</text>
      <rect x="80" y="50" height="20" width="25"
            style="stroke: #FF0000; fill: #FF0000"/>
    </g>

  </svg>

</body>

<script>
	var data = [{"question":"I felt creative", "agree":88, "disagree":4, "neutral":8 },
	                   {"question":"I felt an emotional reaction", "agree":66, "disagree":12, "neutral":22 },
	                   {"question":"I learned something new about the text", "agree":63, "disagree":13, "neutral":24 },
	                   {"question":"It confirmed my understanding of the text", "agree":57, "disagree":10, "neutral":33 },
	                   {"question":"It jogged my memory", "agree":50, "disagree":15, "neutral":35 },
	                   {"question":"The Wordle confused me", "agree":5, "disagree":86, "neutral":9 }, ];
	var svgContainer = d3.select("div#data")
	                    .append("svg")
	                    .attr("width",2000)
	                    .attr("height",150);                
	var svgData= svgContainer.selectAll("text")
	                .data(data)
	                .enter();
	var svgText = svgData.append("text")
	                .text(function(d,i){ return d.question;})
	                .attr("font-family", "calibri")
	                .attr("x", 1)
	                .attr("y", function(d,i){return 15+i*20;});

	var dim = 8;
	var minRecX = 300;
	var minTextX= 270;
	var height = 20;
	//Draw the Rectangle
	var rectAgree = svgData.append("g");
	rectAgree.append("rect")
			 .attr("x", function(d,i){return minRecX;})
	         .attr("y", function(d,i){return i*height;})
	         .attr("width", function(d){return d.agree*dim;})
	         .attr("height", height)
	         .attr("stroke", "white")
	         .attr("fill", "#006600");
	rectAgree.append("text")
			 .text(function(d){return d.agree + "%";})
			 .attr("fill", "white")
			 .attr("dy", ".85em")
			 .attr("y", function(d,i){return i*height;})
			 .attr("x", function(d){return d.agree*dim + minTextX});

	var rectNeutral = svgData.append("g");
	rectNeutral.append("rect")
     		.attr("x", function(d,i){return d.agree*dim + minRecX;})
            .attr("y", function(d,i){return i*height;})
            .attr("width", function(d){return d.neutral*dim;})
            .attr("height", height)
            .attr("stroke", "whtie")
            .attr("fill", "#C0C0C0");
	rectNeutral.append("text")
		 .text(function(d){return d.neutral + "%";})
		 .attr("fill", "black")
		 .attr("dy", ".85em")
		 .attr("y", function(d,i){return i*height;})
		 .attr("x", function(d){return d.agree*dim + d.neutral*dim + minTextX});


	var rectDisagree = svgData.append("g");
	rectDisagree.append("rect")
                .attr("x", function(d,i){return d.agree*dim + d.neutral*dim + minRecX ;})
                .attr("y", function(d,i){return i*height;})
                .attr("width", function(d){return d.disagree*dim;})
                .attr("height", height)
                .attr("stroke", "white")
                .attr("fill", "#FF0000");
   rectDisagree.append("text")
		 .text(function(d){return d.disagree + "%";})
		 .attr("fill", "white")
		 .attr("dy", ".85em")
		 .attr("y", function(d,i){return i*height;})
		 .attr("x", function(d){return d.agree*dim + d.neutral*dim + d.disagree*dim + minTextX});

</script>

</html>
